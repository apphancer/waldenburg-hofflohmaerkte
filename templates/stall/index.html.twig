{% extends 'base.html.twig' %}

{% block title %}{% endblock %}

{% block body %}
    <section class="bg-animated">
        <div class="grid max-w-screen-xl px-4 py-8 mx-auto lg:gap-20 lg:py-16 lg:grid-cols-12">
            <div class="w-full p-6 mx-auto bg-white rounded-lg shadow dark:bg-gray-800 sm:max-w-xl lg:col-span-6 sm:p-8">
                <p class="text-sm">
                    <a href="{{ path('index') }}" class="inline-flex items-center font-medium text-blue-600 dark:text-blue-500 hover:underline">
                        <svg class="w-5 h-5 me-0 text-blue-600 dark:text-blue-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m14 8-4 4 4 4"/>
                        </svg>
                        Zurück zur Karte
                    </a>
                </p>


                <h1 class="mb-2 text-2xl font-bold leading-tight tracking-tight text-gray-900 dark:text-white">
                    Waldenburger Hofflohmärkte
                </h1>


                <p class="font-light text-gray-500 dark:text-gray-300 mb-4">
                    Freitag, 31. Oktober 2025 (Reformationstag), 10 - 17 Uhr
                </p>

                <p class="font-light text-gray-500 dark:text-gray-300 mb-4">
                    Stadtgebiet Waldenburg (08396)
                </p>

                <p class="font-light text-gray-500 dark:text-gray-300 mb-4">
                    Bei Fragen könnt ihr euch unter <a href="mailto:hallo@kleinodd.de" class="inline-flex items-center font-medium text-blue-600 dark:text-blue-500 hover:underline">hallo@kleinodd.de</a> und im <a href="https://www.kleinodd.de" class="inline-flex items-center font-medium text-blue-600 dark:text-blue-500 hover:underline">kleinodd - Buch & Café</a> melden.
                </p>

                {{ form_start(form, {'attr': {'class': 'mt-4 space-y-6 sm:mt-6', 'novalidate': 'novalidate'}}) }}

                {{ form_errors(form) }}

                <div class="grid gap-6 sm:grid-cols-2">
                    {{ form_row(form.fullName) }}
                    {{ form_row(form.email) }}
                </div>

                {% set hasExistingAddress = address is not null and address.formattedAddress is defined %}

                <div class="form-control" {{ stimulus_controller('geocoder', {
                    apiKey: google_maps_api_key,
                    geoCoderPlaceholder: 'Adresse eingeben...',
                    hasExistingAddress: hasExistingAddress
                }) }} data-search-target="geocoderContainer" data-search-target="geocoderContainer">

                    <div class="geocoder" data-geocoder-target="geocoder"></div>

                    {% if hasExistingAddress %}
                        <div class="geocoder" data-geocoder-target="existingAddress">
                            <p>{{ address.formattedAddress }}</p>
                            <a href="#" {{ stimulus_action('geocoder', 'changeAddress') }} class="font-medium text-blue-600 dark:text-blue-500 hover:underline">Ändern</a>
                        </div>
                    {% endif %}

                    {{ form_widget(form.address, { 'attr' : {
                        'data-geocoder-target' : 'result',
                        'data-search-target' : 'result',
                    } }) }}
                    {{ form_errors(form.address) }}
                </div>

                {{ form_row(form.stallNumber, {'attr': {'class': 'w-24'}}) }}

                {{ form_row(form.information) }}
                {{ form_row(form.comments) }}

                <div class="flex items-center">
                    <div class="w-full h-0.5 bg-gray-200 dark:bg-gray-700"></div>
                    <div class="px-5 text-center text-gray-500 dark:text-gray-400"> +</div>
                    <div class="w-full h-0.5 bg-gray-200 dark:bg-gray-700"></div>
                </div>

                {{ form_row(form.agreeTerms) }}

                <button type="submit" class="gradient-button w-full text-white hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-bold rounded-lg px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800">Anmelden</button>

                {{ form_end(form) }}
            </div>
            <div class="mr-auto place-self-center lg:col-span-6">
                <img class="hidden mx-auto lg:flex" src="{{ asset('images/yard-sale.png') }}" alt="illustration">
            </div>
        </div>
    </section>
{% endblock %}
